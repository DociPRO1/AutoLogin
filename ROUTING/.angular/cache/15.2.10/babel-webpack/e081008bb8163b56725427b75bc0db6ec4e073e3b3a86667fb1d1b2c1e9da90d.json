{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Leke/OneDrive/Desktop/ANGULAR/AutoLogin/ROUTING/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./connection.service\";\nimport * as i2 from \"@angular/router\";\nexport class WebserviceService {\n  constructor(connectionService, router) {\n    this.connectionService = connectionService;\n    this.router = router;\n    this.serverData = [];\n    this.dataZips = [];\n    this.mySqlUsers = [];\n    this.myCars = [];\n    this.loginData = [];\n  }\n  getUsers(numUsers) {\n    this.connectionService.sendGetRequest(numUsers).subscribe(data => {\n      console.log(data.results);\n      this.serverData = data.results;\n    }, error => {\n      console.log(\"Errore Get Server Data\");\n      console.log(error);\n    });\n  }\n  getZips(endPoint) {\n    this.connectionService.sendGetRequestZips(endPoint).subscribe(data => {\n      console.log(data);\n      this.dataZips = data;\n    }, error => {\n      console.log(\"Errore Get Server Data\");\n      console.log(error);\n    });\n  }\n  insertZips(citta, stato, pop, id) {\n    let par = {\n      c: citta,\n      s: stato,\n      p: pop,\n      id: id\n    };\n    this.connectionService.sendPostRequestZips('addZip', par).subscribe(data => {\n      console.log(\"Id ricevuto dal server:\" + data);\n      console.log(data);\n    }, error => {\n      console.log(\"Errore esecuzione web service post\");\n      console.log(error);\n    });\n  }\n  getUtentiMySql(endPoint) {\n    this.connectionService.sendGetRequestZips(endPoint).subscribe(data => {\n      console.log(data);\n      this.mySqlUsers = data;\n    }, error => {\n      console.log(\"Errore Get Server Data\");\n      console.log(error);\n    });\n  }\n  vendiAuto(endPoint, par) {\n    this.connectionService.sellCar(endPoint, par).subscribe(data => {\n      console.log(data);\n    }, error => {\n      console.log(\"Errore esecuzione web service post\");\n      console.log(error);\n    });\n  }\n  getCarsSql(endPoint) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield new Promise((resolve, reject) => _this.connectionService.getCars(endPoint).subscribe(data => {\n        console.log(data);\n        _this.myCars = data;\n        resolve(data);\n      }, error => {\n        console.log(\"Errore Get Server Data\");\n        console.log(error);\n        reject(error);\n      }));\n    })();\n  }\n  verifyLogin(email, password) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield new Promise((resolve, reject) => _this2.connectionService.sendVerifyLogin('verifyLogin', {\n        e: email,\n        p: password\n      }).subscribe(data => {\n        console.log(data);\n        if (data.successo == 'ok') {\n          _this2.loginData = data;\n          _this2.router.navigate(['/auto']);\n        } else {\n          alert(\"Errore Login\");\n        }\n        resolve(data);\n      }, error => {\n        console.log(\"Errore Get Server Data\");\n        console.log(error);\n        reject(error);\n      }));\n    })();\n  }\n  static #_ = this.ɵfac = function WebserviceService_Factory(t) {\n    return new (t || WebserviceService)(i0.ɵɵinject(i1.ConnectionService), i0.ɵɵinject(i2.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: WebserviceService,\n    factory: WebserviceService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"mappings":"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","names":["WebserviceService","constructor","connectionService","router","getUsers","numUsers","sendGetRequest","subscribe","data","console","log","results","serverData","error","getZips","endPoint","sendGetRequestZips","dataZips","insertZips","citta","stato","pop","id","par","c","s","p","sendPostRequestZips","getUtentiMySql","mySqlUsers","vendiAuto","sellCar","getCarsSql","Promise","resolve","reject","getCars","myCars","verifyLogin","email","password","sendVerifyLogin","e","successo","loginData","navigate","alert","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Leke\\OneDrive\\Desktop\\ANGULAR\\AutoLogin\\ROUTING\\src\\app\\service\\webservice.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {ConnectionService} from \"./connection.service\";\nimport {Router} from \"@angular/router\";\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WebserviceService {\n\n    constructor(private connectionService: ConnectionService, private router: Router) {\n    }\n\n    serverData: any = [];\n    dataZips: any = [];\n    mySqlUsers: any = [];\n    myCars: any = [];\n\n    getUsers(numUsers: number) {\n        this.connectionService.sendGetRequest(numUsers).subscribe(\n            (data: any) => {//equivalente a .done di ajax\n                console.log(data.results);\n                this.serverData = data.results;\n            },\n            (error: any) => {//equivalente a .fail di ajax\n                console.log(\"Errore Get Server Data\")\n                console.log(error)\n            }\n        )\n    }\n\n    getZips(endPoint: string) {\n        this.connectionService.sendGetRequestZips(endPoint).subscribe(\n            (data: any) => {//equivalente a .done di ajax\n                console.log(data);\n                this.dataZips = data;\n            },\n            (error: any) => {//equivalente a .fail di ajax\n                console.log(\"Errore Get Server Data\")\n                console.log(error)\n            }\n        )\n    }\n\n    insertZips(citta: string, stato: string, pop: number, id: string) {\n        let par = {\n            c: citta,\n            s: stato,\n            p: pop,\n            id: id\n        }\n        this.connectionService.sendPostRequestZips('addZip', par).subscribe(\n            (data: any) => {\n\n                console.log(\"Id ricevuto dal server:\" + data);\n                console.log(data);\n            },\n            (error: any) => {\n                console.log(\"Errore esecuzione web service post\")\n                console.log(error)\n            }\n        )\n\n    }\n\n    getUtentiMySql(endPoint: string) {\n        this.connectionService.sendGetRequestZips(endPoint).subscribe(\n            (data: any) => {//equivalente a .done di ajax\n                console.log(data);\n                this.mySqlUsers = data;\n            },\n            (error: any) => {//equivalente a .fail di ajax\n                console.log(\"Errore Get Server Data\")\n                console.log(error)\n            }\n        )\n\n    }\n    vendiAuto(endPoint: string, par: any) {\n        this.connectionService.sellCar(endPoint, par).subscribe(\n            (data: any) => {\n                console.log(data);\n            },\n            (error: any) => {\n                console.log(\"Errore esecuzione web service post\")\n                console.log(error)\n            }\n        )\n    }\n\n    async getCarsSql(endPoint: string) {\n        await new Promise((resolve,reject) =>\n            this.connectionService.getCars(endPoint).subscribe(\n                (data: any) => {\n                    console.log(data);\n                    this.myCars = data;\n                    resolve(data);\n                },\n                (error: any) => {\n                    console.log(\"Errore Get Server Data\")\n                    console.log(error)\n                    reject(error);\n                }\n\n            )\n        )\n\n\n\n\n    }\n\n    loginData : any = [];\n    async verifyLogin(email: string, password: string) {\n        await new Promise((resolve,reject) =>\n\n            this.connectionService.sendVerifyLogin('verifyLogin', {e: email, p: password}).subscribe(\n                (data: any) => {\n                    console.log(data);\n\n                    if (data.successo == 'ok')\n                    {\n                        this.loginData = data;\n                        this.router.navigate(['/auto']);\n\n                    }\n                    else {\n                        alert(\"Errore Login\")\n                    }\n                    resolve(data);\n                },\n                (error: any) => {\n                    console.log(\"Errore Get Server Data\")\n                    console.log(error)\n                    reject(error);\n                }\n            )\n        )\n\n\n    }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}